jQuery.fn.yaselect=function(d){d=d||{};return this.each(function(k,e){var a=jQuery(e).css({position:"absolute",top:0,left:0,zIndex:1}).addClass("yaselect-select"),b=jQuery('<div class="yaselect-wrap" tabindex="0"><div class="yaselect-current"></div></div>'),c=b.wrap('<div class="yaselect-anchor" style="position:relative;"></div>').parent(),i=function(){c.toggleClass("yaselect-open",a.is(":visible"))},f=function(){return a.find("option:nth("+(e.selectedIndex||0)+")").text()},g=b.find(".yaselect-current").text(f()),
h=function(j){a.blur();g.text(f());a.css({top:b.outerHeight()});j&&b.focus()};if(d.hoverOnly||window.navigator&&navigator.userAgent.match(/iphone|ipod|ipad/i))return a.before(c).css({opacity:0.001}).change(function(){g.text(f())}).appendTo(c);a.before(c).keydown(function(a){if(a.which==13||a.which==32)a.preventDefault(),h(!0)}).change(function(){g.text(f())}).blur(function(){a.hide();i()}).click(function(){a.is(":hidden")?(a.show(),i(),setTimeout(function(){a.focus()})):h(!0)}).appendTo(c);b.mousedown(function(){a.click()}).keydown(function(b){[13,
32,37,38,39,40].indexOf(b.which)!=-1&&(b.preventDefault(),a.click())});e.size=Math.min(e.options.length,d.size||10);h()})};