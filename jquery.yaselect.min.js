jQuery.fn.yaselect=function(a){var b={hoverOnly:false,topOffset:0,leftOffset:0,size:5,useSelectCss:{reuseWidth:false,reuseHeight:false,addWidthToOriginal:0,addHeightToOriginal:0}};a=jQuery.extend(true,b,a);return this.each(function(g,c){var f=jQuery(c).css({position:"absolute",top:a.topOffset,left:a.leftOffset,zIndex:1}).addClass("yaselect-select"),i=jQuery('<div class="yaselect-wrap yaselect-open" tabindex="0"><div class="yaselect-current"></div></div>'),e=i.wrap('<div class="yaselect-anchor" style="position:relative;"></div>').parent(),j=i.find(".yaselect-current").text(c.value),h=function(){return f.find("option:nth("+(c.selectedIndex||0)+")").text()},d=function(k){f.blur();j.text(h());f.css({top:i.outerHeight()});if(k){i.focus()}};if(a.hoverOnly||(window.navigator&&navigator.userAgent.match(/iphone|ipod|ipad/i))){i.toggleClass("yaselect-open yaselect-close");return f.before(e).css({opacity:0.001}).change(function(k){j.text(h())}).appendTo(e)}f.before(e).keydown(function(k){if(k.which===13||k.which===32){k.preventDefault();d(true)}}).change(function(k){j.text(h())}).blur(function(k){f.hide();i.toggleClass("yaselect-open yaselect-close")}).click(function(k){if(f.is(":hidden")){i.toggleClass("yaselect-open yaselect-close");f.show();setTimeout(function(){f.focus()})}else{d(true)}}).appendTo(e);i.mousedown(function(k){f.click()}).keydown(function(k){if([13,32,37,38,39,40].indexOf(k.which)!==-1){k.preventDefault();f.click()}});if(a.useSelectCss.reuseWidth){e.width(f.outerWidth()+a.useSelectCss.addWidthToOriginal);f.width(e.width())}if(a.useSelectCss.reuseHeight){e.height(f.outerHeight()+a.useSelectCss.addHeightToOriginal);f.height(e.height())}c.size=a.size;d()})};